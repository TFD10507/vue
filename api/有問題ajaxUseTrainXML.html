<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.js"></script>
</head>

<body>
    <h2>Train</h2>
    <div>
        <button id="loadButton" class="btn btn-outline-primary">Load Data</button>
    </div>
    <div id="feedback"></div>

    <script>
        $(document).ready(function () {
            $('#loadButton').click(function () {
                $.ajax({
                    url: 'https://ptx.transportdata.tw/MOTC/v3/Rail/TRA/StationExit?%24top=30&%24format=XML',
                    dataType: 'xml',
                    success(res) {
                        // console.log(res);
                        // let trainData = $(res).find('StationExit')
                        //    console.log(trainData[0]);
                        //    let StationName = 
                        // for (let i = 0; i < 1; i++) {
                        // console.log(trainData[i]); 
                        // let stationExit = res.querySelector('StationExit').querySelector('StationName').querySelector('Zh_tw').firstChild.nodeValue;
                        
                        // console.log(stationExit);
                        // }
                        
                        stationExit = res.querySelectorAll('StationExit');

                        tableData = `<table border="1">`;
                        tableData += `<tr>`;
                        tableData += `<th>車站</th>`;
                        // tableData += `<th>出入口</th>`;
                        tableData += `<th>緯度</th>`;
                        tableData += `<th>經度</th>`;
                        tableData += `</tr>`;
                        
                        console.log(stationExit[0].querySelector('StaitionName>Zh_tw'));

                        // for (let i = 0; i < stationExit.length; i++) {
                        //     stationName = stationExit[i].querySelector('StaitionName>Zh_tw').firstChild.nodeValue;
                        //     latitude = stationExit[i].querySelector('StaitionName>PositionLat').firstChild.nodeValue;
                        //     latitude = stationExit[i].querySelector('StaitionName>PositionLon').firstChild.nodeValue;

                        //     createXMLNodes()
                        // }
                        // tableData += `</table>`;
                        // $('#feedback').append(tableData);
                    }, //成功時的處理函數
                });
            });
            function createXMLNodes(){

            }

        });
    </script>
</body>

</html>